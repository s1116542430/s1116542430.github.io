<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>快樂學中文</title>
<style>
  body {
    font-family: '微軟正黑體', sans-serif;
    background: #fff8f0;
    margin: 0; padding: 20px;
  }
  h2 { color: #ff7eb3; }
  .vocab-item {
    margin-bottom: 15px;
  }
  button.play-btn {
    margin-left: 10px;
    padding: 5px 10px;
    background: #ffde76;
    border: none;
    border-radius: 6px;
    cursor: pointer;
  }
  .match-container {
    display: flex;
    gap: 50px;
    margin-top: 30px;
  }
  .colors, .fruits {
    width: 150px;
  }
  .colors div, .fruits div {
    padding: 8px;
    margin: 8px 0;
    background: #ffe9c5;
    border-radius: 6px;
    cursor: pointer;
    user-select: none;
  }
  .matched {
    background: #a2f5a2 !important;
  }
  #result {
    margin-top: 20px;
    font-size: 1.6rem;
  }
</style>
</head>
<body>
  <header><h1>快樂學中文</h1></header>
  
  <section id="vocab">
    <h2>詞彙學習</h2>
    <div class="vocab-item">
      <span>蘋果 (píng guǒ)</span>
      <button class="play-btn" onclick="playAudio('apple')">▶️ 聽</button>
      <audio id="apple" src="apple.mp3"></audio>
    </div>
    <div class="vocab-item">
      <span>香蕉 (xiāng jiāo)</span>
      <button class="play-btn" onclick="playAudio('banana')">▶️ 聽</button>
      <audio id="banana" src="banana.mp3"></audio>
    </div>
    <div class="vocab-item">
      <span>葡萄 (pú táo)</span>
      <button class="play-btn" onclick="playAudio('grape')">▶️ 聽</button>
      <audio id="grape" src="grape.mp3"></audio>
    </div>
    <div class="vocab-item">
      <span>橘子 (jú zi)</span>
      <button class="play-btn" onclick="playAudio('orange')">▶️ 聽</button>
      <audio id="orange" src="orange.mp3"></audio>
    </div>
  </section>

  <section id="sentence">
    <h2>顏色詞彙配對水果</h2>
    <div class="match-container">
      <div class="colors">
        <div draggable="true" id="color-red">紅色</div>
        <div draggable="true" id="color-yellow">黃色</div>
        <div draggable="true" id="color-purple">紫色</div>
        <div draggable="true" id="color-orange">橘色</div>
      </div>
      <div class="fruits">
        <div id="fruit-apple" data-color="紅色">蘋果</div>
        <div id="fruit-banana" data-color="黃色">香蕉</div>
        <div id="fruit-grape" data-color="紫色">葡萄</div>
        <div id="fruit-orange" data-color="橘色">橘子</div>
      </div>
    </div>
    <button onclick="checkMatches()">檢查配對</button>
    <div id="result"></div>
  </section>

<script>
function playAudio(id) {
  const audio = document.getElementById(id);
  audio.currentTime = 0;
  audio.play();
}

// 配對功能
const colors = document.querySelectorAll('.colors div');
const fruits = document.querySelectorAll('.fruits div');

colors.forEach(color => {
  color.addEventListener('dragstart', dragStart);
});

fruits.forEach(fruit => {
  fruit.addEventListener('dragover', dragOver);
  fruit.addEventListener('drop', drop);
});

let draggedColor = null;
function dragStart(e) {
  draggedColor = e.target;
}

function dragOver(e) {
  e.preventDefault();
}

function drop(e) {
  e.preventDefault();
  if (draggedColor) {
    e.target.textContent = draggedColor.textContent + ' 🍎 ' + e.target.textContent;
    e.target.dataset.userColor = draggedColor.textContent;
    draggedColor.classList.add('matched');
    draggedColor.setAttribute('draggable', false);
    draggedColor.style.opacity = 0.5;
  }
}

function checkMatches() {
  let correct = 0;
  fruits.forEach(fruit => {
    if (fruit.dataset.userColor === fruit.dataset.color) {
      fruit.style.backgroundColor = '#a2f5a2';
      correct++;
    } else {
      fruit.style.backgroundColor = '#f5a2a2';
    }
  });
  const result = document.getElementById('result');
  if (correct === fruits.length) {
    result.textContent = '😊 全部配對正確！太棒了！';
    result.style.color = 'green';
  } else {
    result.textContent = '😢 有配對錯誤，請再試試！';
    result.style.color = 'red';
  }
}
</script>
</body>
</html>
